{"ast":null,"code":"var _regeneratorRuntime = require(\"D:/Getty-Search-Media-Results/node_modules/@babel/runtime/helpers/regeneratorRuntime.js\").default;\n\nvar _asyncToGenerator = require(\"D:/Getty-Search-Media-Results/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\n\nvar https = require(\"https\");\n\nvar os = require(\"os\");\n\nvar pjson = require(\"../package.json\");\n\nmodule.exports = WebHelper;\n\nfunction WebHelper(credentials, hostName) {\n  this.get = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(path, headers) {\n      var headersToSend, options, response;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              headersToSend = Object.assign({\n                \"Api-Key\": credentials.apiKey,\n                \"Accept\": \"application/json\"\n              }, headers);\n              options = {\n                hostname: hostName,\n                method: \"GET\",\n                path: path,\n                port: 443,\n                headers: headersToSend\n              };\n\n              if (!(credentials.apiKey && credentials.apiSecret)) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 5;\n              return credentials.getAccessToken();\n\n            case 5:\n              response = _context.sent;\n\n              if (response.access_token) {\n                options.headers.Authorization = \"Bearer \" + response.access_token;\n              }\n\n            case 7:\n              return _context.abrupt(\"return\", request(options));\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  this.postForm = function (path, postData) {\n    var options = {\n      hostname: hostName,\n      method: \"POST\",\n      path: path,\n      port: 443,\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n        \"Content-Length\": postData.length\n      }\n    };\n    return request(options, postData);\n  };\n\n  this.postQuery = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(path, postData) {\n      var options, response;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              postData = JSON.stringify(postData);\n              options = {\n                hostname: hostName,\n                method: \"POST\",\n                path: path,\n                port: 443,\n                headers: {\n                  \"Api-Key\": credentials.apiKey,\n                  \"Content-Type\": \"application/json\",\n                  \"Content-Length\": postData.length\n                }\n              };\n\n              if (!(credentials.apiKey && credentials.apiSecret)) {\n                _context2.next = 7;\n                break;\n              }\n\n              _context2.next = 5;\n              return credentials.getAccessToken();\n\n            case 5:\n              response = _context2.sent;\n\n              if (response.access_token) {\n                options.headers.Authorization = \"Bearer \" + response.access_token;\n              }\n\n            case 7:\n              return _context2.abrupt(\"return\", request(options, postData));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  this.putQuery = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(path, postData) {\n      var options, response;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              postData = JSON.stringify(postData);\n              options = {\n                hostname: hostName,\n                method: \"PUT\",\n                path: path,\n                port: 443,\n                headers: {\n                  \"Api-Key\": credentials.apiKey,\n                  \"Content-Type\": \"application/json\",\n                  \"Content-Length\": postData.length\n                }\n              };\n\n              if (!(credentials.apiKey && credentials.apiSecret)) {\n                _context3.next = 7;\n                break;\n              }\n\n              _context3.next = 5;\n              return credentials.getAccessToken();\n\n            case 5:\n              response = _context3.sent;\n\n              if (response.access_token) {\n                options.headers.Authorization = \"Bearer \" + response.access_token;\n              }\n\n            case 7:\n              return _context3.abrupt(\"return\", request(options, postData));\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  this.deleteQuery = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(path) {\n      var options, response;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              options = {\n                hostname: hostName,\n                method: \"DELETE\",\n                path: path,\n                port: 443,\n                headers: {\n                  \"Api-Key\": credentials.apiKey,\n                  \"Content-Length\": 0\n                }\n              };\n\n              if (!(credentials.apiKey && credentials.apiSecret)) {\n                _context4.next = 6;\n                break;\n              }\n\n              _context4.next = 4;\n              return credentials.getAccessToken();\n\n            case 4:\n              response = _context4.sent;\n\n              if (response.access_token) {\n                options.headers.Authorization = \"Bearer \" + response.access_token;\n              }\n\n            case 6:\n              return _context4.abrupt(\"return\", request(options));\n\n            case 7:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x7) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  function request(options) {\n    var postData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    addUserAgentString(options);\n    return new Promise(function (resolve, reject) {\n      var request = https.request(options, function (response) {\n        response.setEncoding(\"utf8\");\n        var str = \"\";\n        response.on(\"data\", function (chunk) {\n          str += chunk;\n        });\n        response.on(\"end\", function () {\n          if (response.statusCode >= 400) {\n            var err = new Error(response.statusMessage);\n            err.statusCode = response.statusCode;\n            reject(err);\n          } else {\n            resolve(str.length > 0 ? JSON.parse(str) : null);\n          }\n        });\n        response.on(\"error\", function (err) {\n          reject(err);\n        });\n      });\n\n      if (postData) {\n        request.write(postData);\n      }\n\n      request.end();\n    });\n  }\n\n  function addUserAgentString(options) {\n    // eslint-disable-next-line no-undef\n    options.headers[\"User-Agent\"] = \"GettyImagesApiSdk/\" + pjson.version + \" (\" + os.type() + \" \" + os.release() + \"; Node.js \" + process.version + \")\";\n  }\n}","map":{"version":3,"names":["https","require","os","pjson","module","exports","WebHelper","credentials","hostName","get","path","headers","headersToSend","Object","assign","apiKey","options","hostname","method","port","apiSecret","getAccessToken","response","access_token","Authorization","request","postForm","postData","length","postQuery","JSON","stringify","putQuery","deleteQuery","addUserAgentString","Promise","resolve","reject","setEncoding","str","on","chunk","statusCode","err","Error","statusMessage","parse","write","end","version","type","release","process"],"sources":["D:/Getty-Search-Media-Results/node_modules/@vineetshekhawat/gettyimages-api/lib/webhelper.js"],"sourcesContent":["var https = require(\"https\");\r\nvar os = require(\"os\");\r\nvar pjson = require(\"../package.json\");\r\n\r\nmodule.exports = WebHelper;\r\n\r\nfunction WebHelper(credentials, hostName) {\r\n\r\n    this.get = async function (path,headers) {\r\n        var headersToSend = Object.assign({\r\n            \"Api-Key\": credentials.apiKey,\r\n            \"Accept\": \"application/json\"},headers);\r\n\r\n        var options = {\r\n            hostname: hostName,\r\n            method: \"GET\",\r\n            path: path,\r\n            port: 443,\r\n            headers: headersToSend\r\n        };\r\n\r\n        if (credentials.apiKey && credentials.apiSecret) {\r\n            var response = await credentials.getAccessToken();\r\n            if (response.access_token) {\r\n                options.headers.Authorization = \"Bearer \" + response.access_token;\r\n            }\r\n        }\r\n\r\n        return request(options);\r\n    };\r\n\r\n    this.postForm =  function (path, postData) {\r\n\r\n        var options = {\r\n            hostname: hostName,\r\n            method: \"POST\",\r\n            path: path,\r\n            port: 443,\r\n            headers: {\r\n                \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n                \"Content-Length\": postData.length\r\n            }\r\n        };\r\n\r\n        return request(options, postData);\r\n\r\n    };\r\n\r\n    this.postQuery = async function (path, postData) {\r\n\r\n        postData = JSON.stringify(postData);\r\n\r\n        var options = {\r\n            hostname: hostName,\r\n            method: \"POST\",\r\n            path: path,\r\n            port: 443,\r\n            headers: {\r\n                \"Api-Key\": credentials.apiKey,\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": postData.length\r\n            }\r\n        };\r\n\r\n        if (credentials.apiKey && credentials.apiSecret) {\r\n            var response = await credentials.getAccessToken();\r\n            if (response.access_token) {\r\n                options.headers.Authorization = \"Bearer \" + response.access_token;\r\n            }\r\n        }\r\n        \r\n        return request(options, postData);\r\n    };\r\n\r\n    this.putQuery = async function (path, postData) {\r\n        \r\n        postData = JSON.stringify(postData);\r\n\r\n        var options = {\r\n            hostname: hostName,\r\n            method: \"PUT\",\r\n            path: path,\r\n            port: 443,\r\n            headers: {\r\n                \"Api-Key\": credentials.apiKey,\r\n                \"Content-Type\": \"application/json\",\r\n                \"Content-Length\": postData.length\r\n            }\r\n        };\r\n\r\n        if (credentials.apiKey && credentials.apiSecret) {\r\n            var response = await credentials.getAccessToken();\r\n            if (response.access_token) {\r\n                options.headers.Authorization = \"Bearer \" + response.access_token;\r\n            }\r\n        }\r\n        \r\n        return request(options, postData);\r\n    };\r\n\r\n    this.deleteQuery = async function (path) {\r\n\r\n        var options = {\r\n            hostname: hostName,\r\n            method: \"DELETE\",\r\n            path: path,\r\n            port: 443,\r\n            headers: {\r\n                \"Api-Key\": credentials.apiKey,\r\n                \"Content-Length\": 0\r\n            }\r\n        };\r\n\r\n        if (credentials.apiKey && credentials.apiSecret) {\r\n            var response = await credentials.getAccessToken();\r\n            if (response.access_token) {\r\n                options.headers.Authorization = \"Bearer \" + response.access_token;\r\n            }\r\n        }\r\n        \r\n        return request(options);\r\n    };\r\n\r\n    function request(options, postData = null) {\r\n\r\n        addUserAgentString(options);\r\n\r\n        return new Promise((resolve, reject) => {\r\n            var request = https.request(options, function (response) {\r\n\r\n                response.setEncoding(\"utf8\");\r\n                var str = \"\";\r\n\r\n                response.on(\"data\", function (chunk) {\r\n                    str += chunk;\r\n                });\r\n                response.on(\"end\", function () {\r\n                    if (response.statusCode >= 400) {\r\n                        var err = new Error(response.statusMessage);\r\n                        err.statusCode = response.statusCode;\r\n                        reject(err);\r\n\r\n                    } else {\r\n                        resolve((str.length > 0) ? JSON.parse(str) : null);\r\n                    }\r\n                });\r\n                response.on(\"error\", function (err) {\r\n                    reject(err);\r\n                });\r\n            });\r\n            if (postData) {\r\n                request.write(postData);\r\n            }\r\n            request.end();\r\n        });\r\n    }\r\n\r\n    function addUserAgentString(options) {\r\n        // eslint-disable-next-line no-undef\r\n        options.headers[\"User-Agent\"] = \"GettyImagesApiSdk/\" + pjson.version + \" (\" + os.type() + \" \" + os.release() + \"; Node.js \" + process.version + \")\";\r\n    }\r\n}\r\n"],"mappings":";;;;AAAA,IAAIA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAnB;;AACA,IAAIC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,iBAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,SAAjB;;AAEA,SAASA,SAAT,CAAmBC,WAAnB,EAAgCC,QAAhC,EAA0C;EAEtC,KAAKC,GAAL;IAAA,sEAAW,iBAAgBC,IAAhB,EAAqBC,OAArB;MAAA;MAAA;QAAA;UAAA;YAAA;cACHC,aADG,GACaC,MAAM,CAACC,MAAP,CAAc;gBAC9B,WAAWP,WAAW,CAACQ,MADO;gBAE9B,UAAU;cAFoB,CAAd,EAEcJ,OAFd,CADb;cAKHK,OALG,GAKO;gBACVC,QAAQ,EAAET,QADA;gBAEVU,MAAM,EAAE,KAFE;gBAGVR,IAAI,EAAEA,IAHI;gBAIVS,IAAI,EAAE,GAJI;gBAKVR,OAAO,EAAEC;cALC,CALP;;cAAA,MAaHL,WAAW,CAACQ,MAAZ,IAAsBR,WAAW,CAACa,SAb/B;gBAAA;gBAAA;cAAA;;cAAA;cAAA,OAckBb,WAAW,CAACc,cAAZ,EAdlB;;YAAA;cAcCC,QAdD;;cAeH,IAAIA,QAAQ,CAACC,YAAb,EAA2B;gBACvBP,OAAO,CAACL,OAAR,CAAgBa,aAAhB,GAAgC,YAAYF,QAAQ,CAACC,YAArD;cACH;;YAjBE;cAAA,iCAoBAE,OAAO,CAACT,OAAD,CApBP;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAX;;IAAA;MAAA;IAAA;EAAA;;EAuBA,KAAKU,QAAL,GAAiB,UAAUhB,IAAV,EAAgBiB,QAAhB,EAA0B;IAEvC,IAAIX,OAAO,GAAG;MACVC,QAAQ,EAAET,QADA;MAEVU,MAAM,EAAE,MAFE;MAGVR,IAAI,EAAEA,IAHI;MAIVS,IAAI,EAAE,GAJI;MAKVR,OAAO,EAAE;QACL,gBAAgB,mCADX;QAEL,kBAAkBgB,QAAQ,CAACC;MAFtB;IALC,CAAd;IAWA,OAAOH,OAAO,CAACT,OAAD,EAAUW,QAAV,CAAd;EAEH,CAfD;;EAiBA,KAAKE,SAAL;IAAA,uEAAiB,kBAAgBnB,IAAhB,EAAsBiB,QAAtB;MAAA;MAAA;QAAA;UAAA;YAAA;cAEbA,QAAQ,GAAGG,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAAX;cAEIX,OAJS,GAIC;gBACVC,QAAQ,EAAET,QADA;gBAEVU,MAAM,EAAE,MAFE;gBAGVR,IAAI,EAAEA,IAHI;gBAIVS,IAAI,EAAE,GAJI;gBAKVR,OAAO,EAAE;kBACL,WAAWJ,WAAW,CAACQ,MADlB;kBAEL,gBAAgB,kBAFX;kBAGL,kBAAkBY,QAAQ,CAACC;gBAHtB;cALC,CAJD;;cAAA,MAgBTrB,WAAW,CAACQ,MAAZ,IAAsBR,WAAW,CAACa,SAhBzB;gBAAA;gBAAA;cAAA;;cAAA;cAAA,OAiBYb,WAAW,CAACc,cAAZ,EAjBZ;;YAAA;cAiBLC,QAjBK;;cAkBT,IAAIA,QAAQ,CAACC,YAAb,EAA2B;gBACvBP,OAAO,CAACL,OAAR,CAAgBa,aAAhB,GAAgC,YAAYF,QAAQ,CAACC,YAArD;cACH;;YApBQ;cAAA,kCAuBNE,OAAO,CAACT,OAAD,EAAUW,QAAV,CAvBD;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAjB;;IAAA;MAAA;IAAA;EAAA;;EA0BA,KAAKK,QAAL;IAAA,uEAAgB,kBAAgBtB,IAAhB,EAAsBiB,QAAtB;MAAA;MAAA;QAAA;UAAA;YAAA;cAEZA,QAAQ,GAAGG,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAAX;cAEIX,OAJQ,GAIE;gBACVC,QAAQ,EAAET,QADA;gBAEVU,MAAM,EAAE,KAFE;gBAGVR,IAAI,EAAEA,IAHI;gBAIVS,IAAI,EAAE,GAJI;gBAKVR,OAAO,EAAE;kBACL,WAAWJ,WAAW,CAACQ,MADlB;kBAEL,gBAAgB,kBAFX;kBAGL,kBAAkBY,QAAQ,CAACC;gBAHtB;cALC,CAJF;;cAAA,MAgBRrB,WAAW,CAACQ,MAAZ,IAAsBR,WAAW,CAACa,SAhB1B;gBAAA;gBAAA;cAAA;;cAAA;cAAA,OAiBab,WAAW,CAACc,cAAZ,EAjBb;;YAAA;cAiBJC,QAjBI;;cAkBR,IAAIA,QAAQ,CAACC,YAAb,EAA2B;gBACvBP,OAAO,CAACL,OAAR,CAAgBa,aAAhB,GAAgC,YAAYF,QAAQ,CAACC,YAArD;cACH;;YApBO;cAAA,kCAuBLE,OAAO,CAACT,OAAD,EAAUW,QAAV,CAvBF;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAhB;;IAAA;MAAA;IAAA;EAAA;;EA0BA,KAAKM,WAAL;IAAA,uEAAmB,kBAAgBvB,IAAhB;MAAA;MAAA;QAAA;UAAA;YAAA;cAEXM,OAFW,GAED;gBACVC,QAAQ,EAAET,QADA;gBAEVU,MAAM,EAAE,QAFE;gBAGVR,IAAI,EAAEA,IAHI;gBAIVS,IAAI,EAAE,GAJI;gBAKVR,OAAO,EAAE;kBACL,WAAWJ,WAAW,CAACQ,MADlB;kBAEL,kBAAkB;gBAFb;cALC,CAFC;;cAAA,MAaXR,WAAW,CAACQ,MAAZ,IAAsBR,WAAW,CAACa,SAbvB;gBAAA;gBAAA;cAAA;;cAAA;cAAA,OAcUb,WAAW,CAACc,cAAZ,EAdV;;YAAA;cAcPC,QAdO;;cAeX,IAAIA,QAAQ,CAACC,YAAb,EAA2B;gBACvBP,OAAO,CAACL,OAAR,CAAgBa,aAAhB,GAAgC,YAAYF,QAAQ,CAACC,YAArD;cACH;;YAjBU;cAAA,kCAoBRE,OAAO,CAACT,OAAD,CApBC;;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAnB;;IAAA;MAAA;IAAA;EAAA;;EAuBA,SAASS,OAAT,CAAiBT,OAAjB,EAA2C;IAAA,IAAjBW,QAAiB,uEAAN,IAAM;IAEvCO,kBAAkB,CAAClB,OAAD,CAAlB;IAEA,OAAO,IAAImB,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;MACpC,IAAIZ,OAAO,GAAGzB,KAAK,CAACyB,OAAN,CAAcT,OAAd,EAAuB,UAAUM,QAAV,EAAoB;QAErDA,QAAQ,CAACgB,WAAT,CAAqB,MAArB;QACA,IAAIC,GAAG,GAAG,EAAV;QAEAjB,QAAQ,CAACkB,EAAT,CAAY,MAAZ,EAAoB,UAAUC,KAAV,EAAiB;UACjCF,GAAG,IAAIE,KAAP;QACH,CAFD;QAGAnB,QAAQ,CAACkB,EAAT,CAAY,KAAZ,EAAmB,YAAY;UAC3B,IAAIlB,QAAQ,CAACoB,UAAT,IAAuB,GAA3B,EAAgC;YAC5B,IAAIC,GAAG,GAAG,IAAIC,KAAJ,CAAUtB,QAAQ,CAACuB,aAAnB,CAAV;YACAF,GAAG,CAACD,UAAJ,GAAiBpB,QAAQ,CAACoB,UAA1B;YACAL,MAAM,CAACM,GAAD,CAAN;UAEH,CALD,MAKO;YACHP,OAAO,CAAEG,GAAG,CAACX,MAAJ,GAAa,CAAd,GAAmBE,IAAI,CAACgB,KAAL,CAAWP,GAAX,CAAnB,GAAqC,IAAtC,CAAP;UACH;QACJ,CATD;QAUAjB,QAAQ,CAACkB,EAAT,CAAY,OAAZ,EAAqB,UAAUG,GAAV,EAAe;UAChCN,MAAM,CAACM,GAAD,CAAN;QACH,CAFD;MAGH,CArBa,CAAd;;MAsBA,IAAIhB,QAAJ,EAAc;QACVF,OAAO,CAACsB,KAAR,CAAcpB,QAAd;MACH;;MACDF,OAAO,CAACuB,GAAR;IACH,CA3BM,CAAP;EA4BH;;EAED,SAASd,kBAAT,CAA4BlB,OAA5B,EAAqC;IACjC;IACAA,OAAO,CAACL,OAAR,CAAgB,YAAhB,IAAgC,uBAAuBR,KAAK,CAAC8C,OAA7B,GAAuC,IAAvC,GAA8C/C,EAAE,CAACgD,IAAH,EAA9C,GAA0D,GAA1D,GAAgEhD,EAAE,CAACiD,OAAH,EAAhE,GAA+E,YAA/E,GAA8FC,OAAO,CAACH,OAAtG,GAAgH,GAAhJ;EACH;AACJ"},"metadata":{},"sourceType":"script"}